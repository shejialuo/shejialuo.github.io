<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Website mata -->
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<!-- Disable transformation -->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<!-- Website description -->

<meta name="description" content="Telegram代收QQ和微信消息" />


<!-- Website keywords -->

<meta name="keywords" content="技术, 洛的藏书阁" />




<!-- Website rss -->

<link rel="alternate" href="/atom.xml" title="洛的藏书阁" type="application/atom+xml">


<!-- Website favicon -->

<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=3.0.0" />


<!-- Canonical, good for google search engine -->
<link rel="canonical" href="https://luolibrary.com/2022/11/07/Telegram代收QQ和微信消息/" />

<!-- Fancybox styling -->

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />


<!-- MathJax (LaTeX) support -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });  
  </script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<!-- Theme styling -->
<link rel="stylesheet" type="text/css" href="/css/style.css?v=3.0.0" />

<!-- Analytics and push -->



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7M238H24L4"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-7M238H24L4');
</script>

  



<!-- LeanCloud Counter -->


<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null,"server_url":null,"cdn":null},"toc":true,"fancybox":true,"latex":true};
</script>
  
  <title>Telegram代收QQ和微信消息 - 洛的藏书阁</title>

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div class="scrollPercentage"></div>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">洛的藏书阁</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
    <a href="/">
      <li class="mobile-menu-item">
        
        
        Home              </li>
    </a>
    
    <a href="/archives/">
      <li class="mobile-menu-item">
        
        
        Archives              </li>
    </a>
    
    <a href="/tags/">
      <li class="mobile-menu-item">
        
        
        Tags              </li>
    </a>
    
    <a href="/categories/">
      <li class="mobile-menu-item">
        
        
        Categories              </li>
    </a>
    
    <a href="/about/">
      <li class="mobile-menu-item">
        
        
        About              </li>
    </a>
    
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
      <div class="logo-wrapper">  
  <a href="/." class="logo">洛的藏书阁</a>  
</div>  
  
<nav class="site-navbar">  
    
    <ul id="menu" class="menu">  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/">  
              
              
              Home  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/archives/">  
              
              
              Archives  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/tags/">  
              
              
              Tags  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/categories/">  
              
              
              Categories  
              
          </a>  
        </li>  
        
        <li class="menu-item">  
          <a class="menu-item-link" href="/about/">  
              
              
              About  
              
          </a>  
        </li>  
        
    </ul>  
    
</nav>  

    </header>
    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
  <header class="post-header">
    <h1 class="post-title">
      
      Telegram代收QQ和微信消息
      
    </h1>

    <div class="post-meta">
      <span class="post-time">
        2022-11-07
      </span>
      
      
      <span class="post-category">
        
        <a href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>
        
      </span>
      
      
    </div>
  </header>

  
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">1. 前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">2. 前提条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">3.</span> <span class="toc-text">3. 环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-enForwarderBot"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 enForwarderBot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-efb-telegram-master"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 efb-telegram-master</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-efb-qq-slave"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 efb-qq-slave</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-efb-wechat-slave"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 efb-wechat-slave</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%AE%89%E8%A3%85"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 中间件安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">4. 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E9%85%8D%E7%BD%AE%E4%B8%A4%E4%B8%AATelegram%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 配置两个Telegram机器人</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E9%85%8D%E7%BD%AEQQ"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 配置QQ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E9%85%8D%E7%BD%AE%E5%BE%AE%E4%BF%A1"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 配置微信</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%BF%90%E8%A1%8C"><span class="toc-number">5.</span> <span class="toc-text">5. 运行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%89%8D%E5%8F%B0%E8%BF%90%E8%A1%8C%E7%94%A8%E4%BA%8E%E6%B5%8B%E8%AF%95"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 前台运行用于测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 使用服务</span></a></li></ol></li></ol>
    </div>
  </div>
  

  <div class="post-content">
    
    <h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h2><p>在ArchLinux i3上想用QQ和微信别人交流，是一件极其困难的事情，腾讯开发的linux for qq总是经常的出现段错误，而且界面过于丑陋。同时，腾讯为UOS开发的WeChat仅仅通过Electron封装了网页端，聊天记录都不能保存。故尝试采用Telegram代收QQ和微信消息。首先本文感谢以下的开源项目：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/efb-qq-slave">efb-qq-slave</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/efb-qq-plugin-go-cqhttp">efb-qq-plugin-go-cqhttp</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/Mrs4s/go-cqhttp">go-cqhttp</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/efb-wechat-slave">efb-wechat-slave</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/efb-telegram-master">efb-telegram-master</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/ehForwarderBot">enForwarderBot</a></li>
</ul>
<p>在阅读本教程以前，你应该首先阅读<code>efb-qq-slave</code>作者写的教程<a target="_blank" rel="noopener" href="https://milkice.me/2018/09/17/efb-how-to-send-and-receive-messages-from-qq-on-telegram/">安装并使用EFB：在Telegram收发QQ消息</a>。熟悉一些基本的概念。</p>
<h2 id="2-前提条件"><a href="#2-前提条件" class="headerlink" title="2. 前提条件"></a>2. 前提条件</h2><p>在开始部署之前，需要完成以下的准备工作：</p>
<ul>
<li>墙外的一台VPS或者墙内的一台VPS加上科学上网工具</li>
<li>一台电脑，Windows系统采用Windows Terminal和PowerShell7进行SSH连接</li>
</ul>
<h2 id="3-环境搭建"><a href="#3-环境搭建" class="headerlink" title="3. 环境搭建"></a>3. 环境搭建</h2><p>由于我的服务器环境为Ubuntu 20.04 LTS，本文按照该操作系统进行描述。如果你采用的是其他发行版的Linux服务器，其过程并无本质区别。由于依赖或LTS版本的问题，你可能会遇到很多坑，如果你熟悉Docker，建议采取Docker部署服务，同时也为你的服务器中的其他服务提供了隔离。</p>
<h3 id="3-1-enForwarderBot"><a href="#3-1-enForwarderBot" class="headerlink" title="3.1 enForwarderBot"></a>3.1 enForwarderBot</h3><p>我自己写了一个shell脚本进行安装，故此处展示函数，有需要请读者自取。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">install_efb</span></span>() &#123;</span><br><span class="line">  <span class="comment"># To install the corresponding dependency</span></span><br><span class="line">  <span class="built_in">sudo</span> apt-get install libopus0 ffmpeg libmagic1 git libssl-dev</span><br><span class="line"></span><br><span class="line">  <span class="comment"># To install the efb</span></span><br><span class="line">  pip3 install -U https://github.com/ehForwarderBot/ehForwarderBot</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-efb-telegram-master"><a href="#3-2-efb-telegram-master" class="headerlink" title="3.2 efb-telegram-master"></a>3.2 efb-telegram-master</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">install_etm</span></span>() &#123;</span><br><span class="line">  <span class="comment"># To install the efb-telegram-master</span></span><br><span class="line">  pip3 install -U git+https://github.com/ehforwarderbot/efb-telegram-master</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-efb-qq-slave"><a href="#3-3-efb-qq-slave" class="headerlink" title="3.3 efb-qq-slave"></a>3.3 efb-qq-slave</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">install_eqs</span></span>() &#123;</span><br><span class="line">  <span class="comment"># To install efb-qq-slave</span></span><br><span class="line">  pip3 install -U git+https://github.com/ehForwarderBot/efb-qq-slave</span><br><span class="line">  <span class="comment"># To install efb-qq-plugin-go-cqhttp</span></span><br><span class="line">  pip3 install -U git+https://github.com/ehForwarderBot/efb-qq-plugin-go-cqhttp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-efb-wechat-slave"><a href="#3-4-efb-wechat-slave" class="headerlink" title="3.4 efb-wechat-slave"></a>3.4 efb-wechat-slave</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">install_ews</span></span>() &#123;</span><br><span class="line">  <span class="comment"># To install efb-wechat-slave</span></span><br><span class="line">  pip3 install -U git+https://github.com/ehForwarderBot/efb-wechat-slave</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-中间件安装"><a href="#3-5-中间件安装" class="headerlink" title="3.5 中间件安装"></a>3.5 中间件安装</h3><p>此处有少数可选的中间件，用于加强功能。你可以选择安装也可以直接忽略。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">install_middlewares</span></span>() &#123;</span><br><span class="line">  <span class="comment"># To install efb-link_preview-middleware</span></span><br><span class="line">  pip3 install -U git+https://github.com/ehForwarderBot/efb-link_preview-middleware</span><br><span class="line"></span><br><span class="line">  <span class="comment"># To install efb-voice_recog-middleware</span></span><br><span class="line">  pip3 install -U git+https://github.com/ehForwarderBot/efb-voice_recog-middleware</span><br><span class="line"></span><br><span class="line">  <span class="comment"># To install efb-search_msg-middleware</span></span><br><span class="line">  pip3 install -U git+https://github.com/ehForwarderBot/efb-search_msg-middleware</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-配置"><a href="#4-配置" class="headerlink" title="4. 配置"></a>4. 配置</h2><p>EFB的工作机制是一个唯一的主端和多个从端进行通信。由于需要同时代收QQ和微信，故需要两个Telegram机器人，一个机器人用于接收QQ消息，一个机器人用于接收微信消息。</p>
<h3 id="4-1-配置两个Telegram机器人"><a href="#4-1-配置两个Telegram机器人" class="headerlink" title="4.1 配置两个Telegram机器人"></a>4.1 配置两个Telegram机器人</h3><p>此处直接参考efb-qq-slave作者的博客的教程，你需要重复该操作两次。一个是为了接收QQ消息，一个是为了接收微信消息。</p>
<p>要创建一个新的Bot，要先向<code>@BotFather</code>发起会话。发送指令<code>/newbot</code>以启动向导。期间，你需要指定这个 Bot的名称与用户名（用户名必须以bot结尾）。完毕之后<code>@BotFather</code>会提供给你一个密钥（Token），妥善保存这个密钥。请注意，为保护您的隐私及信息安全，请不要向任何人提供你的Bot用户名及密钥，这可能导致聊天信息泄露等各种风险。</p>
<p>接下来还要对刚刚启用的 Bot 进行进一步的配置：允许 Bot 读取非指令信息、允许将 Bot 添加进群组、以及提供指令列表。</p>
<p>发送 <code>/setprivacy</code> 到 <code>@BotFather</code>，选择刚刚创建好的Bot用户名，然后选择 “Disable”.<br>发送 <code>/setjoingroups</code> 到 <code>@BotFather</code>，选择刚刚创建好的Bot用户名，然后选择 “Enable”.<br>发送 <code>/setcommands</code> 到 <code>@BotFather</code>，选择刚刚创建好的Bot用户名，然后发送如下内容：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">help - Show commands list.</span><br><span class="line">link - Link a remote chat to a group.</span><br><span class="line">unlink_all - Unlink all remote chats from a group.</span><br><span class="line">info - Display information of the current Telegram chat.</span><br><span class="line">chat - Generate a chat head.</span><br><span class="line">extra - Access additional features from Slave Channels.</span><br><span class="line">update_info - Update info of linked Telegram group.</span><br><span class="line">react - Send a reaction to a message, or show a list of reactors.</span><br><span class="line">rm - Remove a message from its remote chat.</span><br></pre></td></tr></table></figure>

<p>然后还需要获取你自己的 Telegram ID，ID 应显示为一串数字。获取你自己的 ID 有很多方式，你可以选择任意一种。下面介绍两种可能的方式。</p>
<ol>
<li>Plus Messenger，如果你使用了Plus Messenger作为你的Telegram客户端，你可以直接打开你自己的资料页，在「自己」下面会显示你的ID。</li>
<li>通过Bot查询，很多现存的Bot也提供了ID查询服务，直接向其发送特定的指令即可获得自己的数字ID。在这里介绍一些接触过的。</li>
</ol>
<ul>
<li>@get_id_bot 发送 &#x2F;start</li>
<li>@XYMbot 发送 &#x2F;whois</li>
<li>@mokubot 发送 &#x2F;whoami</li>
<li>@GroupButler_Bot 发送 &#x2F;id</li>
<li>@jackbot 发送 &#x2F;me</li>
<li>@userinfobot 发送任意文字</li>
<li>@orzdigbot 发送 &#x2F;user</li>
</ul>
<p>留存你的Telegram ID以便后续使用。</p>
<h3 id="4-2-配置QQ"><a href="#4-2-配置QQ" class="headerlink" title="4.2 配置QQ"></a>4.2 配置QQ</h3><p>如果需要配置QQ，你必须要首页阅读这两个项目主页的帮助文档：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/efb-qq-slave">efb-qq-slave</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/efb-qq-plugin-go-cqhttp">efb-qq-plugin-go-cqhttp</a></li>
</ul>
<p>然后你可以执行参考以下的脚本，你只需要修改<code>token</code>和<code>id</code>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">QQ_CONFIG=~/.ehforwarderbot/profiles/qq</span><br><span class="line">TELEGRAM_MASTER=<span class="string">&quot;blueset.telegram&quot;</span></span><br><span class="line">QQ_SLAVE=<span class="string">&quot;milkice.qq&quot;</span></span><br><span class="line"><span class="function"><span class="title">configure_qq</span></span>() &#123;</span><br><span class="line">  <span class="keyword">if</span> [[  -e <span class="string">&quot;<span class="variable">$&#123;QQ_CONFIG&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;The profile directory exists, exit&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;QQ_CONFIG&#125;</span>&quot;</span></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;QQ_CONFIG&#125;</span>/<span class="variable">$&#123;TELEGRAM_MASTER&#125;</span>&quot;</span></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;QQ_CONFIG&#125;</span>/<span class="variable">$&#123;QQ_SLAVE&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  (</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;master_channel: <span class="variable">$&#123;TELEGRAM_MASTER&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;slave_channels:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  - <span class="variable">$&#123;QQ_SLAVE&#125;</span>&quot;</span></span><br><span class="line">  ) &gt;&gt; <span class="string">&quot;<span class="variable">$&#123;QQ_CONFIG&#125;</span>/config.yaml&quot;</span></span><br><span class="line"></span><br><span class="line">  (</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;token: &quot;&lt;your_token&gt;&quot;&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;admins:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  - &lt;your_id&gt;&quot;</span></span><br><span class="line">  ) &gt;&gt; <span class="string">&quot;<span class="variable">$&#123;QQ_CONFIG&#125;</span>/<span class="variable">$&#123;TELEGRAM_MASTER&#125;</span>/config.ymal&quot;</span></span><br><span class="line"></span><br><span class="line">  (</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Client: GoCQHttp&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;GoCQHttp:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  type: HTTP&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  access_token:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  api_root: http://127.0.0.1:5700/&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  host: 127.0.0.1&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  port: 8000&quot;</span></span><br><span class="line">  ) &gt;&gt;  <span class="string">&quot;<span class="variable">$&#123;QQ_CONFIG&#125;</span>/<span class="variable">$&#123;QQ_SLAVE&#125;</span>/config.ymal&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同时你需要运行QQ机器人，此处请参考仓库里面的教程。</p>
<h3 id="4-3-配置微信"><a href="#4-3-配置微信" class="headerlink" title="4.3 配置微信"></a>4.3 配置微信</h3><p>同样，你应该首先阅读下面仓库的说明文档：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/ehForwarderBot/efb-wechat-slave">efb-wechat-slave</a></li>
</ul>
<p>然后你可以执行参考以下的脚本，你只需要修改<code>token</code>和<code>id</code>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">WECHAT_WEB_CONFIG=~/.ehforwarderbot/profiles/wechat</span><br><span class="line">TELEGRAM_MASTER=<span class="string">&quot;blueset.telegram&quot;</span></span><br><span class="line">WECHAT_SLAVE=<span class="string">&quot;blueset.wechat&quot;</span></span><br><span class="line"><span class="function"><span class="title">configure_wechat_web</span></span>() &#123;</span><br><span class="line">  <span class="keyword">if</span> [[  -e <span class="string">&quot;<span class="variable">$&#123;WECHAT_WEB_CONFIG&#125;</span>&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;The profile directory exists, exit&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;WECHAT_WEB_CONFIG&#125;</span>&quot;</span></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;WECHAT_WEB_CONFIG&#125;</span>/<span class="variable">$&#123;TELEGRAM_MASTER&#125;</span>&quot;</span></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;WECHAT_WEB_CONFIG&#125;</span>/<span class="variable">$&#123;WECHAT_SLAVE&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">  (</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;master_channel: <span class="variable">$&#123;TELEGRAM_MASTER&#125;</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;slave_channels:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  - <span class="variable">$&#123;WECHAT_SLAVE&#125;</span>&quot;</span></span><br><span class="line">  ) &gt;&gt; <span class="string">&quot;<span class="variable">$&#123;WECHAT_WEB_CONFIG&#125;</span>/config.yaml&quot;</span></span><br><span class="line"></span><br><span class="line">  (</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27;token: &quot;&lt;your_token&gt;&quot;&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;admins:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  - &lt;your_id&gt;&quot;</span></span><br><span class="line">  ) &gt;&gt; <span class="string">&quot;<span class="variable">$&#123;WECHAT_WEB_CONFIG&#125;</span>/<span class="variable">$&#123;TELEGRAM_MASTER&#125;</span>/config.ymal&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-运行"><a href="#5-运行" class="headerlink" title="5. 运行"></a>5. 运行</h2><h3 id="5-1-前台运行用于测试"><a href="#5-1-前台运行用于测试" class="headerlink" title="5.1 前台运行用于测试"></a>5.1 前台运行用于测试</h3><p>对于QQ而言：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 首先运行QQ机器人</span></span><br><span class="line">./go-cqhttp</span><br><span class="line"><span class="comment"># 启动efb-qq-slave</span></span><br><span class="line">ehforwarderbot --profile qq</span><br></pre></td></tr></table></figure>

<p>对于微信而言：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ehforwarderbot --profile wechat</span><br></pre></td></tr></table></figure>

<h3 id="5-2-使用服务"><a href="#5-2-使用服务" class="headerlink" title="5.2 使用服务"></a>5.2 使用服务</h3><p>创建后台服务，对于QQ而言，你可以创建两个服务，一个启动机器人，一个启动<code>efb-qq-slave</code></p>
<p>对于微信而言，你只需要创建一个服务直接启动<code>efb-wechat-slave</code>。至于怎么创建服务，请读者自行查阅相关资料。</p>

    
  </div>

  
  <!-- Post Copyright -->

<div class="post-copyright">
  <p class="copyright-item">
    <span>Author: </span>
    <a href="https://luolibrary.com">shejialuo</a>
  </p>
  <p class="copyright-item">
    <span>Link: </span>
    <a href="https://luolibrary.com/2022/11/07/Telegram%E4%BB%A3%E6%94%B6QQ%E5%92%8C%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF/">https://luolibrary.com/2022/11/07/Telegram%E4%BB%A3%E6%94%B6QQ%E5%92%8C%E5%BE%AE%E4%BF%A1%E6%B6%88%E6%81%AF/</a>
  </p>
  <p class="copyright-item">
    <span>License: </span>
    
    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a>
  </p>
</div>

    

  

  
  <footer class="post-footer">
    
    <div class="post-tags">
      
      <a href="/tags/%E6%8A%80%E6%9C%AF/">技术</a>
      
    </div>
    
      
  <nav class="post-nav">  
      
      <a class="prev" href="/2022/11/08/Rewrite-%E7%BD%9A%E6%8A%84/">  
        <i class="iconfont icon-left"></i>  
        <span class="prev-text nav-default">Rewrite(罚抄)</span>  
        <span class="prev-text nav-mobile">Prev</span>  
      </a>  
      
      
      <a class="next" href="/2022/11/07/Windows-Terminal%E9%85%8D%E7%BD%AE%E7%BE%8E%E5%8C%96%E8%BF%87%E7%A8%8B/">  
        <span class="next-text nav-default">Windows Terminal配置美化过程</span>  
        <span class="prev-text nav-mobile">Next</span>  
        <i class="iconfont icon-right"></i>  
      </a>  
      
  </nav>  
  

  </footer>
  

</article>
        </div>
          
  <div class="comments" id="comments">  
      
      <div id="utterances-container"></div>  
      
  </div>  
  

      </div>
    </main>
    <footer id="footer" class="footer">
      <!-- Social Links -->

<div class="social-links">
  
  
  
  
  <a href="mailto:shejialuo@gmail.com" class="iconfont icon-email" title="email"></a>
  
  
  
  
  
  
  
  
  
  <a target="_blank" rel="noopener" href="https://twitter.com/luo_hope" class="iconfont icon-twitter" title="twitter"></a>
  
  
  
  
  
  
  
  
  
  <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/jialuo-she-913873289/" class="iconfont icon-linkedin" title="linkedin"></a>
  
  
  
  
  
  
  
  
  
  <a target="_blank" rel="noopener" href="https://github.com/shejialuo" class="iconfont icon-github" title="github"></a>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
  
</div>



<div class="copyright">

  <span class="copyright-year">
    <span>
      
      &copy;
      
      2020 - 2025      
    </span>

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>

    <span class="author">shejialuo</span>
  </span>

</div>
    </footer>
    <div class="back-to-top" id="back-to-top"> <i class="iconfont icon-up"></i> </div>
  </div>
    
    
    
    
    
  
<script>
  var container = document.getElementById('utterances-container');
  var script = document.createElement('script');
  script.src = 'https://utteranc.es/client.js';
  script.setAttribute('repo', 'shejialuo/shejialuo.github.io');
  script.setAttribute('issue-term', 'pathname');
  script.setAttribute('theme', 'github-light');
  script.setAttribute('label', 'Comment');
  script.crossorigin = 'anonymous';
  script.async = true;

  container.appendChild(script);
</script>
  
    
  

  







<script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>



<script type="text/javascript" src="/lib/slideout/slideout.js"></script>



<script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>



<!-- mermaid -->

  <script src='https://unpkg.com/mermaid@9.2.0/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>


  <script type="text/javascript" src="/js/src/even.js?v=3.0.0"></script>
</body>

</html>